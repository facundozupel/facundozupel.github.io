---
import Layout from '../layouts/Layout.astro';

const cascadasDestacadas = [
  { nombre: 'Salto del Laja', region: 'Biobío', info: 'Biobío · 35 m', badge: '#00e5d4', img: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=600&q=80', slug: 'salto-del-laja' },
  { nombre: 'Cascada de los Cántaros', region: 'Los Lagos', info: 'Llanquihue · 50 m', badge: '#b8e8e4', img: 'https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=600&q=80', slug: 'cascada-de-los-cantaros' },
  { nombre: 'Salto Río Ibáñez', region: 'Aysén', info: 'General Carrera · 80 m', badge: '#cceae6', img: 'https://images.unsplash.com/photo-1501854140801-50d01698950b?w=600&q=80', slug: 'salto-rio-ibanez' },
  { nombre: 'Salto del Huilo-Huilo', region: 'Los Ríos', info: 'Panguipulli · 37 m', badge: '#00e5d4', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&q=80', slug: 'salto-del-huilo-huilo' },
  { nombre: 'Cascada Velo de la Novia', region: 'Araucanía', info: 'Pucón · 40 m', badge: '#b8e8e4', img: 'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?w=600&q=80', slug: 'cascada-velo-de-la-novia' },
  { nombre: 'Salto Grande Torres del Paine', region: 'Magallanes', info: 'Torres del Paine · 18 m', badge: '#cceae6', img: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=600&q=80', slug: 'salto-grande-torres-del-paine' },
];

const regionesDestacadas = [
  { name: 'Biobío', count: '32', slug: 'biobio', img: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&q=80' },
  { name: 'Araucanía', count: '48', slug: 'araucania', img: 'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?w=800&q=80' },
  { name: 'Los Lagos', count: '95', slug: 'los-lagos', img: 'https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=800&q=80' },
  { name: 'Aysén', count: '73', slug: 'aysen', img: 'https://images.unsplash.com/photo-1501854140801-50d01698950b?w=800&q=80' },
  { name: 'Magallanes', count: '38', slug: 'magallanes', img: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800&q=80' },
];

const todasRegiones = [
  { name: 'Atacama & Coquimbo', zona: 'Norte', count: '12', slug: 'atacama-coquimbo', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&q=80' },
  { name: 'Valparaíso', zona: 'Centro', count: '18', slug: 'valparaiso', img: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=400&q=80' },
  { name: 'Región Metropolitana', zona: 'Centro', count: '22', slug: 'metropolitana', img: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&q=80' },
  { name: "O'Higgins & Maule", zona: 'Centro-Sur', count: '28', slug: 'ohiggins-maule', img: 'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?w=400&q=80' },
  { name: 'Biobío', zona: 'Sur', count: '32', slug: 'biobio', img: 'https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=400&q=80' },
  { name: 'Araucanía', zona: 'Sur', count: '48', slug: 'araucania', img: 'https://images.unsplash.com/photo-1501854140801-50d01698950b?w=400&q=80' },
  { name: 'Los Ríos & Los Lagos', zona: 'Sur', count: '95', slug: 'los-lagos', img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&q=80' },
  { name: 'Aysén', zona: 'Austral', count: '73', slug: 'aysen', img: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=400&q=80' },
  { name: 'Magallanes', zona: 'Austral', count: '38', slug: 'magallanes', img: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&q=80' },
];

const articulosRecientes = [
  {
    titulo: 'Las 10 Mejores Cascadas de Chile para Visitar en 2025',
    slug: 'mejores-cascadas-chile',
    categoria: 'Guías',
    tiempo: '8 min',
    img: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&q=80',
  },
  {
    titulo: 'Cascadas cerca de Santiago: guía completa para el fin de semana',
    slug: 'cascadas-cerca-de-santiago',
    categoria: 'Guías',
    tiempo: '6 min',
    img: 'https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?w=800&q=80',
  },
  {
    titulo: '¿Cuál es la cascada más alta de Chile?',
    slug: 'cascada-mas-alta-de-chile',
    categoria: 'Datos',
    tiempo: '3 min',
    img: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&q=80',
  },
];
---

<Layout
  title="Cascadas de Chile — Descubre las Caídas de Agua de Chile"
  description="Portal de las cascadas más impresionantes de Chile. Descubre saltos, cataratas y caídas de agua a lo largo de todo el país."
>

  <!-- ═══════════════════════════════════════════════════
       1. HERO CON BUSCADOR
  ═══════════════════════════════════════════════════ -->
  <section style="
    min-height: 70vh;
    background: #091d2b;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 64px 2.5rem 4rem;
    position: relative;
    overflow: hidden;
    text-align: center;
  ">
    <div style="
      position:absolute; inset:0; z-index:0; pointer-events:none;
      background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22><filter id=%22n%22><feTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/><feColorMatrix type=%22saturate%22 values=%220%22/></filter><rect width=%22200%22 height=%22200%22 filter=%22url(%23n)%22 opacity=%220.03%22/></svg>');
    "></div>

    <div style="position:relative; z-index:1; max-width:800px; width:100%;">
      <p style="
        color:#00e5d4; font-size:0.8rem; font-weight:500;
        letter-spacing:0.2em; text-transform:uppercase; margin:0 0 1.5rem;
      ">Portal de Cascadas</p>

      <h1 style="
        font-family:'Archivo Black',sans-serif;
        font-size: clamp(3rem, 8vw, 6rem);
        color: #f4efe6;
        margin: 0 0 1rem;
        letter-spacing: -0.02em;
        text-transform: uppercase;
        line-height: 0.95;
      ">CASCADAS DE CHILE</h1>

      <p class="reveal" style="
        color: rgba(244,239,230,0.7);
        font-size: clamp(1rem, 1.6vw, 1.2rem);
        line-height: 1.5;
        margin: 0 auto 3rem;
        max-width: 520px;
        font-weight: 300;
      ">Guía de cascadas, saltos y caídas de agua de Chile</p>

      <form id="search-form" style="
        display: flex;
        max-width: 560px;
        margin: 0 auto;
        gap: 0;
      ">
        <input
          id="search-cascada"
          type="text"
          placeholder="Busca una cascada o región..."
          style="
            flex: 1;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            border: 2px solid rgba(244,239,230,0.15);
            border-right: none;
            border-radius: 999px 0 0 999px;
            background: rgba(244,239,230,0.06);
            color: #f4efe6;
            outline: none;
            transition: border-color 0.2s;
          "
        />
        <button type="submit" style="
          padding: 1rem 2rem;
          font-size: 0.85rem;
          font-weight: 600;
          font-family: 'DM Sans', sans-serif;
          letter-spacing: 0.1em;
          text-transform: uppercase;
          background: #00e5d4;
          color: #091d2b;
          border: 2px solid #00e5d4;
          border-radius: 0 999px 999px 0;
          cursor: pointer;
          transition: background 0.2s;
        ">Buscar</button>
      </form>

      <p style="
        color: rgba(244,239,230,0.4);
        font-size: 0.8rem;
        margin: 1.5rem 0 0;
        font-weight: 300;
      ">+500 cascadas catalogadas en todo Chile</p>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════════════
       2. EXPLORA POR REGIÓN — Cards visuales
  ═══════════════════════════════════════════════════ -->
  <section style="
    background: #f4efe6;
    padding: 6rem 2.5rem;
  ">
    <h2 class="reveal" style="
      font-family:'Archivo Black',sans-serif;
      font-size: clamp(2rem, 5vw, 4rem);
      color: #091d2b;
      margin: 0 0 3rem;
      text-transform: uppercase;
      text-align: center;
    ">EXPLORA POR REGIÓN</h2>

    <div style="
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 1rem;
      max-width: 1200px;
      margin: 0 auto;
    ">
      {regionesDestacadas.map(r => (
        <a href={`/region/${r.slug}`} class="cascade-card" style="
          display: block;
          text-decoration: none;
          position: relative;
          border-radius: 8px;
          overflow: hidden;
          height: 280px;
        ">
          <div style={`
            position: absolute; inset: 0;
            background-image: url('${r.img}');
            background-size: cover; background-position: center;
            transition: transform 0.4s ease;
          `}></div>
          <div style="
            position: absolute; inset: 0;
            background: linear-gradient(to top, rgba(9,29,43,0.85) 0%, rgba(9,29,43,0.2) 60%, transparent 100%);
          "></div>
          <div style="
            position: absolute; bottom: 0; left: 0; right: 0;
            padding: 1.25rem;
          ">
            <h3 style="
              font-family:'Archivo Black',sans-serif;
              font-size: 1.15rem;
              color: #f4efe6;
              margin: 0 0 0.25rem;
              text-transform: uppercase;
            ">{r.name}</h3>
            <p style="
              color: #00e5d4;
              font-size: 0.8rem;
              font-weight: 600;
              margin: 0;
            ">{r.count} cascadas</p>
          </div>
        </a>
      ))}
    </div>
  </section>


  <!-- ═══════════════════════════════════════════════════
       3. CASCADAS DESTACADAS — grid 2×3
  ═══════════════════════════════════════════════════ -->
  <section id="cascadas" style="
    background: #091d2b;
    padding: 7rem 2.5rem;
  ">
    <h2 class="reveal" style="
      font-family:'Archivo Black',sans-serif;
      font-size: clamp(2rem, 5vw, 4rem);
      color: #f4efe6;
      margin: 0 0 3.5rem;
      text-transform: uppercase;
      text-align: center;
    ">CASCADAS DESTACADAS</h2>

    <div style="
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.25rem;
      max-width: 1200px;
      margin: 0 auto;
    ">
      {cascadasDestacadas.map(c => (
        <a href={`/cascadas/${c.slug}`} class="cascade-card" style="display:block; text-decoration:none; cursor:pointer;">
          <div style={`
            height: 280px;
            background-image: url('${c.img}');
            background-size: cover; background-position: center;
            border-radius: 4px; margin-bottom: 1rem;
            position: relative; overflow: hidden;
          `}>
            <span style={`
              position:absolute; top:0.85rem; left:0.85rem;
              background:${c.badge}; color:#091d2b;
              font-size:0.7rem; font-weight:600; letter-spacing:0.1em;
              text-transform:uppercase; padding:0.25rem 0.65rem; border-radius:999px;
            `}>{c.region}</span>
          </div>
          <h3 style="
            font-family:'Archivo Black',sans-serif;
            font-size: 1.3rem; color:#f4efe6; margin:0 0 0.3rem;
            text-transform: uppercase; letter-spacing:-0.01em;
          ">{c.nombre}</h3>
          <p style="color:rgba(244,239,230,0.55); font-size:0.85rem; margin:0; font-weight:300;">{c.info}</p>
        </a>
      ))}
    </div>

    <div style="margin-top:4rem; text-align:center;">
      <a href="/cascadas" style="
        display:inline-flex; align-items:center; gap:0.75rem;
        color:#091d2b; background:#00e5d4; text-decoration:none;
        font-size:0.85rem; font-weight:600; letter-spacing:0.12em;
        text-transform:uppercase; padding:1rem 2.5rem; border-radius:999px;
      ">Ver todas las cascadas →</a>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════════════
       4. TODAS LAS REGIONES — Directorio completo
  ═══════════════════════════════════════════════════ -->
  <section id="regiones" style="
    background: #0d2a3d;
    padding: 6rem 2.5rem;
  ">
    <h2 class="reveal" style="
      font-family:'Archivo Black',sans-serif;
      font-size: clamp(2rem, 5vw, 4rem);
      color: #f4efe6;
      margin: 0 0 3rem;
      text-transform: uppercase;
      text-align: center;
    ">TODAS LAS REGIONES</h2>

    <div style="
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      max-width: 1000px;
      margin: 0 auto;
    ">
      {todasRegiones.map(r => (
        <a href={`/region/${r.slug}`} style="
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 0.85rem;
          border-radius: 8px;
          background: rgba(244,239,230,0.04);
          text-decoration: none;
          transition: background 0.2s;
        " onmouseenter="this.style.background='rgba(244,239,230,0.08)'" onmouseleave="this.style.background='rgba(244,239,230,0.04)'">
          <div style={`
            width: 56px; height: 56px; flex-shrink: 0;
            border-radius: 6px; overflow: hidden;
            background-image: url('${r.img}');
            background-size: cover; background-position: center;
          `}></div>
          <div style="min-width:0;">
            <p style="
              color: #f4efe6; font-size: 0.95rem; font-weight: 500;
              margin: 0 0 0.15rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            ">{r.name}</p>
            <p style="
              color: rgba(244,239,230,0.45); font-size: 0.75rem;
              margin: 0; font-weight: 300;
            ">{r.zona} · {r.count} cascadas</p>
          </div>
        </a>
      ))}
    </div>

    <div style="margin-top:3rem; text-align:center;">
      <a href="/region" style="
        display:inline-flex; align-items:center; gap:0.5rem;
        color:#00e5d4; text-decoration:none; font-size:0.8rem;
        font-weight:600; letter-spacing:0.12em; text-transform:uppercase;
      ">Ver todas las regiones →</a>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════════════
       5. GUÍAS Y DATOS — Blog reciente
  ═══════════════════════════════════════════════════ -->
  <section style="
    background: #f4efe6;
    padding: 6rem 2.5rem;
  ">
    <h2 class="reveal" style="
      font-family:'Archivo Black',sans-serif;
      font-size: clamp(2rem, 5vw, 4rem);
      color: #091d2b;
      margin: 0 0 3rem;
      text-transform: uppercase;
      text-align: center;
    ">GUÍAS Y DATOS</h2>

    <div style="
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
      max-width: 1100px;
      margin: 0 auto;
    ">
      {articulosRecientes.map(a => (
        <a href={`/blog/${a.slug}`} class="cascade-card" style="
          display: block;
          text-decoration: none;
          cursor: pointer;
        ">
          <div style={`
            height: 200px;
            background-image: url('${a.img}');
            background-size: cover; background-position: center;
            border-radius: 6px; margin-bottom: 1rem;
            position: relative; overflow: hidden;
          `}>
            <span style="
              position: absolute; top: 0.75rem; left: 0.75rem;
              background: #091d2b; color: #00e5d4;
              font-size: 0.65rem; font-weight: 600; letter-spacing: 0.1em;
              text-transform: uppercase; padding: 0.2rem 0.6rem; border-radius: 999px;
            ">{a.categoria}</span>
          </div>
          <h3 style="
            font-family:'Archivo Black',sans-serif;
            font-size: 1.1rem; color: #091d2b; margin: 0 0 0.4rem;
            text-transform: uppercase; line-height: 1.2;
          ">{a.titulo}</h3>
          <p style="color: rgba(9,29,43,0.5); font-size: 0.8rem; margin: 0; font-weight: 300;">{a.tiempo} de lectura</p>
        </a>
      ))}
    </div>

    <div style="margin-top:3rem; text-align:center;">
      <a href="/blog" style="
        display:inline-flex; align-items:center; gap:0.5rem;
        color:#091d2b; text-decoration:none; font-size:0.8rem;
        font-weight:600; letter-spacing:0.12em; text-transform:uppercase;
        border-bottom: 2px solid #091d2b; padding-bottom: 0.25rem;
      ">Ver más artículos →</a>
    </div>
  </section>


  <!-- ═══════════════════════════════════════════════════
       6. CTA MAPA
  ═══════════════════════════════════════════════════ -->
  <section style="
    background: #b8e8e4;
    padding: 5rem 2.5rem;
    text-align: center;
  ">
    <p class="reveal" style="
      color: rgba(9,29,43,0.6);
      font-size: 0.8rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin: 0 0 1rem;
    ">¿No sabes por dónde empezar?</p>
    <h2 class="reveal" style="
      font-family:'Archivo Black',sans-serif;
      font-size: clamp(2rem, 5vw, 3.5rem);
      color: #091d2b;
      margin: 0 0 2rem;
      text-transform: uppercase;
    ">Explora el mapa interactivo</h2>
    <a href="/mapa" style="
      display: inline-flex; align-items: center; gap: 0.75rem;
      background: #091d2b; color: #f4efe6;
      text-decoration: none; font-size: 0.85rem;
      font-weight: 600; letter-spacing: 0.12em;
      text-transform: uppercase; padding: 1rem 2.5rem;
      border-radius: 999px; transition: background 0.2s;
    ">Ver Mapa →</a>
  </section>

</Layout>

<style>
  /* Responsive: region cards stack on mobile */
  @media (max-width: 768px) {
    section div[style*="grid-template-columns: repeat(5"] {
      grid-template-columns: repeat(2, 1fr) !important;
    }
    section div[style*="grid-template-columns: repeat(3"] {
      grid-template-columns: 1fr !important;
    }
  }
  @media (min-width: 769px) and (max-width: 1024px) {
    section div[style*="grid-template-columns: repeat(5"] {
      grid-template-columns: repeat(3, 1fr) !important;
    }
    section div[style*="grid-template-columns: repeat(3"] {
      grid-template-columns: repeat(2, 1fr) !important;
    }
  }
  /* Search input focus */
  #search-cascada:focus {
    border-color: #00e5d4;
  }
  #search-cascada::placeholder {
    color: rgba(244,239,230,0.35);
  }
  /* Search button hover */
  form button[type="submit"]:hover {
    background: #00ffe0;
    border-color: #00ffe0;
  }
</style>

<script>
  // Buscador: redirige a /cascadas con query param
  const form = document.getElementById('search-form');
  const input = document.getElementById('search-cascada') as HTMLInputElement;
  form?.addEventListener('submit', (e) => {
    e.preventDefault();
    const q = input?.value.trim();
    if (q) window.location.href = `/cascadas?q=${encodeURIComponent(q)}`;
  });

  // Scroll reveal (reutilizado del patrón existente)
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.15 });

  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>
